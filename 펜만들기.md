# 펜 만들기
## MFC
![1](img/img2/penMFC.JPG)
```
좌측 상단에 펜의 굵기를 조정해줄 slider를 배치하여
막대가 왼쪽으로 갈수록 펜이 얇아지고 오른쪽으로 갈수록 펜이 굵어지게 된다.
중앙 하단에 색상 변경 버튼을 추가하여 펜의 색상을 변경 할 수 있게 했다.
```
![1](img/img2/slidervar.JPG)
```
슬라이더를 우클릭하여 변수 추가를 눌러서
이름칸에 m_Slider를 추가한다.
```
![1](img/img2/sliderEvent.JPG)
```
이번엔 이벤트 처리기 추가를 선택하여 클래스 목록 콤보박스를 선택하여
가장 아래 본인의 파일 명이 들어간 선택지의 Dlg를 선택한다.
```
## 코드
![1](img/img2/penCode1.JPG)
---
```
160~162
이후 코드에서 사용할 전역변수들이다.
int n은 추후 슬라이더의 값을 받아서 펜의 굵기를 정하게 될 변수
COLORREF m_col은 매크로변수로 펜의 색상을 바꿀때 사용할 변수
CPoint opnt는 바로 아래 함수에서 펜의 시작위치를 정해줄 변수이며 초기화하지 않으면
자동으로 0이 들어간다
```
```
163~174
OnMouseMove함수는 만든 MFC의 속성창에서 상단에있는 메시지를 눌러서
WM_MouseMove를 찾아서 add해주면 자동생성된다
nFlags는 마우스의 상태, point는 마우스의 위치를 나타낸다.
if문의 조건으로는 마우스의 상태가 좌클릭이 되면 참이되어 아래 문장이 실행된다.
CClientDC dc(this)는 디바이스 컨택스트 객체 dc를 만들어서 현재 만들고있는
MFC를 this를 통해 넣어줬다.
이후 펜을 만들고 dc객체에 펜의 주소값을 넣어서 MFC전체 창에 펜을 사용할 수 있게 했다.
MoveTo는 현재 포지션을 CPoint형의 좌표값을 받아서 정해주는 함수이고
LineTo는 선을 그어주는 함수이다.
if외부에 opnt = point때문에 선이 그어지는 시작위치와 끝위치가 같아져서 마우스를 따라
선이 그어지게 된다.

```
---
---
![1](img/img2/penCode2.JPG)
```
이 함수는 이벤트 처리기 추가를 할 때 자동으로 생성이 된다.
간단하게 위에서 선언한 전역변수인 n에 슬라이더의 현재값을 할당하는 역할을 한다.
```
---
---
![1](img/img2/penCode3.JPG)
```
색상을 바꾸는 버튼에서는 CColorDialog를 통해 dialog를 DoModal형태로 만들어서색상을
정하게 된다.
위에서 선언한 전역변수인 m_col에 GetColor함수를 통해 색상값을 넣어준다.
DoModal의 특징은 해당 dialog에서 작업을 마치지 않으면 다른 작업을 하지못하는 특징이 있다
```

